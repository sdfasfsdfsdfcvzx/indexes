<!DOCTYPE html>
<html>
<head>
	<title>Geolocation Test</title>
</head>
<body>
	<h1 style="color: green">Welcome To GFG</h1>
	<h3>How to locate the user's position in HTML?</h3>
	<div>
		<p id="paraGraph"></p>
	</div>
	<script>
		let paraGraph = document.getElementById("paraGraph");
		let user_loc = navigator.geolocation;

		async function geolocator() {
			if (user_loc) {
				try {
					let permission = await navigator.permissions.query({ name: 'geolocation' });
					if (permission.state === "denied") {
						paraGraph.innerHTML = "Location access is denied. Please allow it in settings.";
						return;
					}
					user_loc.getCurrentPosition(success, error);
				} catch (err) {
					paraGraph.innerHTML = "Error checking permissions: " + err.message;
				}
			} else {
				paraGraph.innerHTML = "Your browser doesn't support geolocation API";
			}
		}

		function success(data) {
			let lat = data.coords.latitude;
			let long = data.coords.longitude;
			paraGraph.innerHTML = "Latitude: " + lat + "<br>Longitude: " + long;
		}

		function error(err) {
			paraGraph.innerHTML = "Error: " + err.message;
		}

		// Call geolocator on page load
		window.onload = geolocator;
	</script>
</body>
</html>
